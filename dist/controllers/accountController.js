"use strict";"usr strict";var path=require("path"),mongoose=require("mongoose"),userModel=mongoose.model("userModel");exports.loginGet=function(o,e){e.render(path.join(__dirname,"../views/login.html"),{},function(o,n){return o?(console.log(o),void e.end(o)):void e.end(n)})},exports.loginPost=function(o,e){var n=o.body.username,r=o.body.password,t={name:n,password:r};userModel.find(t,function(r,t){0==t.length?e.end('<script>alert("登录失败");window.location=window.location</script>'):(o.session.name=n,o.session.type=t[0].type,e.end('<script>alert("登录成功");window.location="/"</script>'))})},exports.registerGet=function(o,e){e.render(path.join(__dirname,"../views/register.html"),{},function(o,n){return o?(console.log(o),void e.end(o)):void e.end(n)})},exports.registerPost=function(o,e){userModel.create({name:o.body.username,password:o.body.password,email:o.body.email,type:"1"},function(o){return o?(console.log(o),void e.end(o)):void e.end('<script>alert("注册成功");window.location="/account/login"</script>')})};